Full code with the recommended updates for the component